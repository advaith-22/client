(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{167:function(e,t,a){e.exports=a.p+"static/media/logo.56996e65.png"},172:function(e,t,a){e.exports=a(321)},178:function(e,t,a){},186:function(e,t,a){},188:function(e,t){},190:function(e,t){},224:function(e,t){},226:function(e,t){},227:function(e,t){},232:function(e,t){},234:function(e,t){},254:function(e,t){},270:function(e,t){},273:function(e,t){},317:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(166),c=a.n(r),o=a(168),i=a(38),s=a(50),m=a(112),u=(a(178),a(325)),d=a(167),p=a.n(d);var E=function(){const e=window.localStorage.getItem("token"),[t,a]=Object(n.useState)("");return e&&u.a.get("/user/",{headers:{"x-access-token":localStorage.getItem("token")}}).then(e=>{a(e.data)}),l.a.createElement(s.a,{expand:"lg",className:"bg-body-tertiary"},l.a.createElement(o.a,null,l.a.createElement(s.a.Brand,{href:"/",className:"d-flex align-items-center"},l.a.createElement("img",{src:p.a,alt:"logo",width:"30",height:"50",className:"d-inline-block align-text-top"})," ","AthenaDesk"),l.a.createElement(s.a.Toggle,null),l.a.createElement(s.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(i.a,{className:"me-auto"},l.a.createElement(i.a.Link,{href:"/"},"Dashboard"),l.a.createElement(i.a.Link,{href:"/createticket"},"Create Ticket"))),l.a.createElement(s.a.Collapse,{className:"justify-content-end"},l.a.createElement(i.a,{className:"me-2"},l.a.createElement(i.a.Link,{href:"/login",style:{visibility:e?"hidden":"visible"}},"Sign-in"),l.a.createElement(i.a.Link,{href:"/register",style:{visibility:e?"hidden":"visible"}},"Sign-up"),l.a.createElement(m.a,{title:t,id:"basic-nav-dropdown",style:{visibility:e?"visible":"hidden"}},l.a.createElement(m.a.Item,{onClick:()=>{window.localStorage.clear(),window.location.reload()}},"Logout"))))))},g=(a(186),a(3));a(111);var b=function(){const[e,t]=Object(n.useState)("");Object(n.useEffect)(()=>{u.a.get("https://athena-desk.vercel.app/user/",{headers:{"x-access-token":localStorage.getItem("token")}}).then(e=>{t(e.data)})},[]),console.log(e);const a=Object(g.o)();var[r,c]=Object(n.useState)(),[o,i]=Object(n.useState)(),[s,m]=Object(n.useState)(),[d,p]=Object(n.useState)();const E={creator:e,subject:r,priority:o,description:s,asignee:d};var[b,h]=Object(n.useState)([]);return Object(n.useEffect)(()=>{u.a.get("/users/").then(e=>h(e.data))},[]),l.a.createElement("div",{id:"form"},l.a.createElement("form",{onSubmit:()=>{u.a.post("/uploadTicket",E).then(()=>{a("/")})}},l.a.createElement("h3",null,"Create Issue"),l.a.createElement("div",{class:"form-group mb-3"},l.a.createElement("label",{for:"subject"},"Subject"),l.a.createElement("input",{type:"text",class:"form-control",id:"subject",name:"subject",placeholder:"Enter subject",onChange:e=>{c(e.target.value)}})),l.a.createElement("div",{class:"form-group mb-3"},l.a.createElement("label",{for:"priority"},"Priority"),l.a.createElement("select",{onChange:e=>{i(e.target.value)},class:"form-control",id:"priority"},l.a.createElement("option",{key:"o1",default:!0},"Choose..."),l.a.createElement("option",{key:"o1"},"High"),l.a.createElement("option",{key:"o2"},"Medium"),l.a.createElement("option",{key:"o3"},"Low"))),l.a.createElement("div",{class:"form-group mb-3"},l.a.createElement("label",{for:"description"},"Description"),l.a.createElement("textarea",{onChange:e=>{m(e.target.value)},class:"form-control",id:"description",rows:"3"})),l.a.createElement("div",{class:"form-group mb-3"},l.a.createElement("label",{for:"asignee"},"Asignee"),l.a.createElement("select",{onChange:e=>{p(e.target.value)},class:"form-control",id:"asignee"},l.a.createElement("option",{key:"o1",default:!0},"Choose..."),b.map(e=>l.a.createElement("option",{key:e._id,value:e.name},e.name)))),l.a.createElement("div",{className:"d-grid"},l.a.createElement("button",{type:"submit",id:"submit",className:"btn btn-primary"},"Submit"))))},h=a(42),f=a(169),v=a(111),y=a.n(v);a(317);var S=function(){const e=Object(g.o)();var[t,a]=Object(n.useState)([]);return Object(n.useEffect)(()=>{const t=localStorage.getItem("token");t&&(y.a.decode(t)?fetch("/tickets/",{headers:{"x-access-token":localStorage.getItem("token")}}).then(e=>e.json()).then(e=>a(e)):(localStorage.removeItem("token"),e("/login",{replace:!0})))},[]),l.a.createElement("div",{id:"home"},l.a.createElement(f.a,null,l.a.createElement("h1",null,"Issues"),l.a.createElement("tr",null,l.a.createElement("th",null,"Creator"),l.a.createElement("th",null,"Subject"),l.a.createElement("th",null,"Priority"),l.a.createElement("th",null,"Description"),l.a.createElement("th",null,"Asignee")),function(){try{t.map(e=>l.a.createElement("tr",null,l.a.createElement("td",null,e.creator),l.a.createElement("td",null,e.subject),l.a.createElement("td",null,e.priority),l.a.createElement("td",null,e.description),l.a.createElement("td",null,e.asignee)))}catch(a){localStorage.removeItem("token"),e("/login",{replace:!0})}}()))};a(318),a(319);var j=function(){var[e,t]=Object(n.useState)(),[a,r]=Object(n.useState)(),[c,o]=Object(n.useState)();const i=Object(g.o)();return l.a.createElement("div",{id:"register"},l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),fetch("https://athena-desk.vercel.app/checkIfRegistered",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:e})}).then(e=>e.json()).then(t=>{"yes"===t?(document.getElementById("form").reset(),document.getElementById("email-exists").style.visibility="visible"):(fetch("/register/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:e,email:a,password:c})}).then(e=>{i("/login")}),i("/login"))})}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"name"},"Full Name"),l.a.createElement("input",{type:"text",className:"form-control",onChange:e=>t(e.target.value),id:"name","aria-describedby":"name",placeholder:"Enter full name"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"email"},"Email address"),l.a.createElement("input",{type:"email",className:"form-control",id:"email",onChange:e=>r(e.target.value),"aria-describedby":"emailHelp",placeholder:"Enter email"}),l.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",onChange:e=>o(e.target.value),id:"password",placeholder:"Password"})),l.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),l.a.createElement("p",null,"Already registered? ",l.a.createElement("a",{href:"/login"},"Login"))))};a(320);var k=function(){var e=Object(g.o)();const t=window.localStorage.getItem("token");console.log(t),t&&e("/");var[a,r]=Object(n.useState)(),[c,o]=Object(n.useState)();return l.a.createElement("div",{id:"login"},l.a.createElement("form",{className:"Login",onSubmit:function(t){t.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:a,password:c}),mode:"cors",credentials:"include"}).then(e=>e.json()).then(t=>{console.log(t),t.token?(localStorage.setItem("token",t.token),alert("Login Successful"),e("/")):document.getElementById("err").style.visibility="visible"})}},l.a.createElement("h3",null,"Sign In"),l.a.createElement("p",{id:"err",className:"text-danger",style:{visibility:"hidden"}},"Details provided seem to be incorrect"),l.a.createElement("div",{className:"mb-3"},l.a.createElement("label",null,"Email address"),l.a.createElement("input",{required:!0,onChange:e=>{r(e.target.value)},type:"email",className:"form-control",placeholder:"Enter email"})),l.a.createElement("div",{className:"mb-3"},l.a.createElement("label",null,"Password"),l.a.createElement("input",{required:!0,onChange:e=>{o(e.target.value)},type:"password",className:"form-control",placeholder:"Enter password"})),l.a.createElement("div",{className:"d-grid"},l.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Sign Up")),l.a.createElement("p",{className:"forgot-password text-right"},"No account? ",l.a.createElement("a",{href:"/register"},"Register"))))};var w=function(){return l.a.createElement("div",null,l.a.createElement(E,null),l.a.createElement(h.a,null,l.a.createElement(g.c,null,l.a.createElement(g.a,{path:"/",element:l.a.createElement(S,null)}),l.a.createElement(g.a,{path:"/register",element:l.a.createElement(j,null)}),l.a.createElement(g.a,{path:"/login",element:l.a.createElement(k,null)}),l.a.createElement(g.a,{path:"/createticket",element:l.a.createElement(b,null)}))))};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(w,null)))}},[[172,1,2]]]);
//# sourceMappingURL=main.613cc29c.chunk.js.map